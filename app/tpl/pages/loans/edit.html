<h2 class="text-center">{{ loansController.editing ? "Edit": "New" }} Loan - {{loansController.loan.provider}}</h2>

<div class="row">
    <div class="col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-1 col-xs-12">
        <form name="loanForm" class="form-horizontal center-block" ng-submit="loanForm.$valid && loansController.save()" novalidate>
            <div class="form-group">
                <label for="provider" class="col-sm-4 control-label">Provider</label>
                <div class="col-sm-8">
                    <input ng-model="loansController.loan.provider" type="text" id="provider" name="name" class="form-control" required ng-minlength="3" ng-maxlength="255">
                </div>
            </div>
            <div class="form-group">
                <label for="borrowing_rate" class="col-sm-4 control-label">Borrowing Rate (%)</label>
                <div class="col-sm-8">
                    <input ng-model="loansController.loan.borrowing_rate" type="number" id="borrowing_rate" name="borrowing_rate" class="form-control" required>
                </div>
            </div>
            <div class="form-group">
                <label for="term" class="col-sm-4 control-label">Terms (years)</label>
                <div class="col-sm-8">
                    <input ng-model="loansController.loan.term" type="number" ng-minlength="1" ng-maxlength="100" id="term" name="term" class="form-control" required>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-offset-4 col-sm-8">
                    <input type="submit" value="Save" class="btn btn-primary" ng-disabled="!loanForm.$dirty || !loanForm.$valid">
                    <a href="#/loans" class="btn btn-default">Back to list</a>
                </div>
            </div>

            <div class="alert alert-success" role="alert" ng-show="loansController.form.success && loanForm.$submitted">
                <strong>Success!</strong> You successfully save loan {{loansController.loan.provider}}
            </div>

            <div class="alert alert-danger" role="alert" ng-show="loansController.form.errors">
                <strong>Ups!</strong> Something is wrong:
                <ul>
                    <li ng-repeat="error in loansController.form.errors.errors">{{error}}</li>
                    <li ng-repeat="(field, value) in loansController.form.errors.children" ng-show="loansController.form.errors.children.{{field}}.errors">
                        <div>
                            {{field}}:
                            <ul>
                                <li ng-repeat="error in value.errors">{{error}}</li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </div>
        </form>

        <!--<a href="#/loans/{{ loansController.loan.id }}/delete" class="btn btn-danger">Delete</a>-->
    </div>
</div>

<div class="loaging" ng-show="loansController.loading">
    <div class="loaging_background"></div>
    <img src="img/loading.gif">
</div>
